<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>SASP â€“ Rapport dâ€™intervention</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: radial-gradient(circle at top, #020617, #000);
  color: #e5e7eb;
  padding: 30px;
}
.container {
  max-width: 1000px;
  margin: auto;
  background: #020617;
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,.7);
  border: 1px solid #1e293b;
}
.header { text-align: center; margin-bottom: 30px; }
.header img { width: 130px; }
.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
label { text-transform: uppercase; font-size: 12px; opacity: .8; }
input, textarea, select {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #1e293b;
  background: #020617;
  color: white;
}
textarea { resize: vertical; }
.full { grid-column: span 2; }
button {
  margin-top: 25px;
  padding: 15px;
  width: 100%;
  background: linear-gradient(135deg, #2563eb, #1d4ed8);
  border: none;
  border-radius: 14px;
  color: white;
  font-size: 17px;
  cursor: pointer;
}
</style>
</head>

<body>
<div class="container">

<div class="header">
  <img src="pngaaa.com-2421674.png">
  <h1>San Andreas State Police</h1>
  <p>Rapport dâ€™intervention â€“ RP</p>
</div>

<!-- FORMULAIRE -->
<form id="reportForm">

<div class="grid">
  <div>
    <label>Officier</label>
    <input id="officer" required>
  </div>
  <div>
    <label>Badge</label>
    <input id="badge" required>
  </div>

  <div>
    <label>Grade</label>
    <select id="grade">
      <option>Trooper</option>
      <option>Sergeant</option>
      <option>Lieutenant</option>
      <option>Captain</option>
    </select>
  </div>

  <div>
    <label>UnitÃ©</label>
    <select id="unit">
      <option>Patrol</option>
      <option>Highway Patrol</option>
      <option>SWAT</option>
      <option>Detective</option>
    </select>
  </div>

  <div>
    <label>Date & Heure</label>
    <input id="datetime" required>
  </div>

  <div>
    <label>Type dâ€™intervention</label>
    <select id="type">
      <option>ContrÃ´le routier</option>
      <option>Poursuite</option>
      <option>Interpellation</option>
      <option>Accident</option>
    </select>
  </div>

  <div class="full">
    <label>Lieu</label>
    <input id="location" required>
  </div>

  <div class="full">
    <label>Personnes impliquÃ©es</label>
    <textarea id="persons"></textarea>
  </div>

  <div class="full">
    <label>DÃ©roulement des faits</label>
    <textarea id="facts" rows="5"></textarea>
  </div>

  <div class="full">
    <label>Photos / preuves</label>
    <input type="file" id="photos" multiple accept="image/*">
  </div>
</div>

<button type="submit">ðŸš€ Envoyer sur Discord</button>
</form>
</div>

<script>
const WEBHOOK_URL = "https://discordapp.com/api/webhooks/1463771725207699620/zUidbxDqAQbGI2RWighueJk0OpSNLwbTPsCtbF7onsPG0BmgUXLN8T_KYhwSUf-rrjr9";

document.getElementById("reportForm").addEventListener("submit", async function(e) {
  e.preventDefault(); // empÃªche rechargement page

  const files = document.getElementById("photos").files;

  const embed = {
    title: "ðŸš” Rapport dâ€™intervention â€“ SASP",
    color: 3447003,
    fields: [
      { name: "Officier", value: grade.value + " " + officer.value, inline: true },
      { name: "Badge", value: badge.value, inline: true },
      { name: "UnitÃ©", value: unit.value, inline: true },
      { name: "Date & Heure", value: datetime.value, inline: true },
      { name: "Lieu", value: location.value, inline: true },
      { name: "Type", value: type.value, inline: true },
      { name: "Personnes impliquÃ©es", value: persons.value || "Aucune" },
      { name: "DÃ©roulement des faits", value: facts.value || "Non renseignÃ©" }
    ],
    footer: { text: "San Andreas State Police â€¢ RP" },
    timestamp: new Date()
  };

  const formData = new FormData();

  if (files.length > 0) {
    embed.image = { url: `attachment://${files[0].name}` };
  }

  formData.append("payload_json", JSON.stringify({ embeds: [embed] }));

  for (let i = 0; i < files.length; i++) {
    formData.append(`files[${i}]`, files[i], files[i].name);
  }

  await fetch(WEBHOOK_URL, { method: "POST", body: formData });

  // RESET GARANTI
  this.reset();
  alert("âœ… Rapport envoyÃ© et formulaire rÃ©initialisÃ© !");
});
</script>

</body>
</html>
